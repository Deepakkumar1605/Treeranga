{% extends 'app_common/base.html' %}
{% load static %}

{% block title %}
New Arrivals
{% endblock title %}

{% block content %}

<div class="container py-4 d-flex flex-column align-items-center lh-lg ">
    <h1 class="text-capitalize">New Arrivals</h1>
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'app_common:home' %}">Home</a></li>
          <li class="breadcrumb-item active text-dark text-capitalize" aria-current="page">New Arrivals</li>
        </ol>
      </nav>
</div>

<div class="px-lg-5 text-center py-3 " id="products_of_category">
    <div class="row row-cols-lg-5 row-cols-2">
        {% for item in new_products %}
        <div class="col product-head my-2">
            <div class="" id="product-cards">
                {% if item.variant == "no" %}
                <a href="{% url 'product:product_detail' p_id=item.simple_product.id %}?variant=no">
                {% elif item.variant == "yes" %}
                    <a href="{% url 'product:product_detail' p_id=item.variant_product.id %}?variant=yes">
                {% endif %} 
                    {% if item.images %}
                        <img src="{{ MEDIA_URL }}{{ item.images.0 }}" class="card-img-top" alt="{{ item.product.name }}">
                    {% else %}
                        <img src="{% static 'default-image.jpg' %}" class="card-img-top" alt="No image available">
                    {% endif %}
                </a>
                <div class="card-body py-2">
                    <h5 class="card-title">{{ item.product.name | truncatechars:27 }}</h5>
                    <p class="card-text m-0">{{ item.product.product_short_description | truncatechars:20 }}</p>

                    {% if item.variant == "no" %}
                        <p class="card-text m-0">
                            <span id="discount_price">₹{{ item.simple_product.product_discount_price }}</span> 
                            <span id="max_price"><s>₹{{ item.simple_product.product_max_price }}</s></span>
                        </p>
                    {% elif item.variant == "yes" %}
                        <p class="card-text m-0">
                            <span id="discount_price">₹{{ item.variant_product.product_discount_price }}</span> 
                            <span id="max_price"><s>₹{{ item.variant_product.product_max_price }}</s></span>
                        </p>
                    {% endif %}

                    <div class="d-flex mt-3">
                        {% if item.variant == "no" %}
                            <a href="{% url 'cart:addtocart' item.simple_product.id %}?variant=no" class="btn vd_button">Add To Cart</a>
                        {% elif item.variant == "yes" %}
                            <a href="{% url 'cart:addtocart' item.variant_product.id %}?variant=yes" class="btn vd_button">Add To Cart</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock content %}
